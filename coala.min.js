!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1),o=n(3),r={observable:o,mount:function(t,e){return this.component(t).mount(e)},unmount:function(t){t.unmount()},component:function(t){return new i(t)}};o(r),t.exports=r},function(t,e,n){function i(t){this.opts=t,this.tpl=t.tpl||function(){},this.el=t.el?$(t.el):void 0,this.data=t.data||{},this.listen=t.listen||{},this.events=t.events||{},this.handle=t.handle||{},this.refs={},this.id=o.uniqueId("component"),r(this),this._listenTo(),this.trigger("init")}var o=n(2),r=n(3);i.prototype.mount=function(t){return this.el=t?$(t):this.el,this.update(),this.trigger("mount"),this},i.prototype.update=function(t){if(this.trigger("update"),this.data=t||this.data,this.rid){var e=this.el,n=this._html();this.el=$(n).attr("rid",this.rid),e.append(this.el),delete this.rid}else{if(this.el.attr("rid"))return void this.el.empty().html($(this._html()).html());this.el.empty().html(this._html())}this._mountRefs(this),this._bindEvents(),this.trigger("updated")},i.prototype.unmount=function(){this.el.empty(),this.trigger("unmount")},i.prototype.$=function(t){return this.el.find(t)},i.prototype._html=function(){return this.tpl(this.data)},i.prototype._mountRefs=function(t){if(this.opts.refs)for(var e in this.opts.refs){var n=this.opts.refs[e],o=new i(n.component);o.refOpts=$.extend(!1,{},n),delete o.refOpts.component,delete o.refOpts.el,n.data&&(o.data=$.extend(!1,o.data,n.data),delete o.refOpts.data),n.rid&&(o.rid=n.rid,delete o.refOpts.rid),o.parent=t,this.refs[e]=o,o.mount(n.el)}},i.prototype._bindEvents=function(){for(var t in this.events){var e=this.events[t],n=this.el.find(t.split(" ")[1]);n.on(t.split(" ")[0],$.proxy(this.handle[e],this))}},i.prototype._listenTo=function(){for(var t in this.listen){var e=this.listen[t];this.on(t,e)}},t.exports=i},function(t){t.exports={counter:0,uniqueId:function(t){return(t||"")+ ++this.counter},isUndefined:function(t){return"undefined"==typeof t},isFunction:function(t){return"function"==typeof t}}},function(t,e,n){var i=n(2);t.exports=function(t){t=t||{};var e={},n=0;return t.on=function(o,r){return i.isFunction(r)&&(i.isUndefined(r.id)&&(r._id=n++),o.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(r),r.typed=n>0})),t},t.off=function(n,i){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(i)for(var n,o=e[t],r=0;n=o&&o[r];++r)n._id==i._id&&o.splice(r--,1);else e[t]=[]}),t},t.one=function(e,n){function i(){t.off(e,i),n.apply(t,arguments)}return t.on(e,i)},t.trigger=function(n){for(var i,o=[].slice.call(arguments,1),r=e[n]||[],s=0;i=r[s];++s)i.busy||(i.busy=1,i.apply(t,i.typed?[n].concat(o):o),r[s]!==i&&s--,i.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(o)),t},t}}])});