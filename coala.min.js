!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n=i(1),o=i(3),r={observable:o,mount:function(t,e){return this.component(t).mount(e)},render:function(t){var e=$("<div>");return this.mount(t,e),e.html()},unmount:function(t){t.unmount()},component:function(t){return new n(t)}};o(r),t.exports=r},function(t,e,i){function n(t){if(r(this),this.opts=t||{},$.isFunction(t.data)){var e=t.data.call(this);e&&e.promise?this.promise=e:this.data=e}this.data=t.data||{},this.data.$url&&(this.promise=$.get(this.data.$url),delete this.data.$url),this.refs={},this._mixin(),this._listenTo(),this.trigger("init")}var o=i(2),r=i(3);n.prototype.mount=function(t,e){this.trigger("update");var i=this;return this.promise?(this.promise.done(function(n){i.data.resource=n,i._render(t,e)}),this):this._render(t,e)},n.prototype._render=function(t,e){return this._dom(),this._initRefs(this),t&&(this.el=$(t)),this.el.append(this.dom.children()),e||(this._bindEvents(),this.trigger("mount")),this.trigger("updated"),this},n.prototype.update=function(t){t&&(this.data=$.extend(!1,this.data,t)),this.trigger("update"),this._dom(),this._initRefs(this,!0);var e=this.el[0].cloneNode(!1);return e.innerHTML=this.dom.html(),o(this.el[0],e),this.trigger("updated")},n.prototype.unmount=function(){this.el.empty().off(),this.trigger("unmount").off("*")},n.prototype.$=function(t){return this.el.find(t)},n.prototype._dom=function(){return this.opts.tpl?this.dom=$("<div>"+this.opts.tpl(this.data)+"</div>"):void(this.dom=$("<div></div>"))},n.prototype._initRefs=function(t,e){if(this.opts.refs)for(var i in this.opts.refs)if(e)this.refs[i].mount(void 0,e);else{var o=this.opts.refs[i];o.data&&(o.component.data=$.extend(!0,o.component.data,o.data));var r=new n(o.component);r.refOpts=$.extend(!0,{},o),r.parent=t,this.refs[i]=r,r.el=t.dom.find(o.el),r.mount(void 0,e)}},n.prototype._bindEvents=function(){if(this.opts.events)for(var t in this.opts.events){var e=this.opts.events[t],i=t.indexOf(" "),n=t.substr(i+1,t.length);this.el.on(t.substr(0,i),n,$.proxy(this.opts.handle[e],this))}},n.prototype._mixin=function(){if(this.opts.mixins){$.isArray(this.opts.mixins)||(this.opts.mixins=[this.opts.mixins]),this.opts.mixins.unshift(this);{$.extend.apply($,this.opts.mixins)}}},n.prototype._listenTo=function(){if(this.opts.listen)for(var t in this.opts.listen){var e=this.opts.listen[t];this.on(t,e)}},t.exports=n},function(t){"use strict";function e(t){!f&&p.createRange&&(f=p.createRange(),f.selectNode(p.body));var e;return f&&f.createContextualFragment?e=f.createContextualFragment(t):(e=p.createElement("body"),e.innerHTML=t),e.childNodes[0]}function i(t,e,i){t[i]!==e[i]&&(t[i]=e[i],t[i]?t.setAttribute(i,""):t.removeAttribute(i,""))}function n(){}function o(t,e){var i=t.nodeName,n=e.nodeName;return i===n?!0:e.actualize&&i.charCodeAt(0)<91&&n.charCodeAt(0)>90?i===n.toUpperCase():!1}function r(t,e){return e&&e!==h?p.createElementNS(e,t):p.createElement(t)}function s(t,e){if(e.assignAttributes)e.assignAttributes(t);else{var i,n,o,r,s,a,u=e.attributes;for(i=u.length-1;i>=0;--i)n=u[i],o=n.name,r=n.namespaceURI,s=n.value,r?(o=n.localName||o,a=t.getAttributeNS(r,o),a!==s&&t.setAttributeNS(r,o,s)):(a=t.getAttribute(o),a!==s&&t.setAttribute(o,s));for(u=t.attributes,i=u.length-1;i>=0;--i)n=u[i],n.specified!==!1&&(o=n.name,r=n.namespaceURI,r?(o=n.localName||o,l(e,r,o)||t.removeAttributeNS(r,o)):l(e,null,o)||t.removeAttribute(o))}}function a(t,e){for(var i=t.firstChild;i;){var n=i.nextSibling;e.appendChild(i),i=n}return e}function u(t){return t.id}function d(t,i,d){function f(t){A?A.push(t):A=[t]}function l(t,e){if(t.nodeType===m)for(var i=t.firstChild;i;){var n=void 0;e&&(n=C(i))?f(n):(R(i),i.firstChild&&l(i,e)),i=i.nextSibling}}function c(t,e,i){E(t)!==!1&&(e&&e.removeChild(t),R(t),l(t,i))}function h(t){if(t.nodeType===m)for(var e=t.firstChild;e;){var i=C(e);i&&(z[i]=e),h(e),e=e.nextSibling}}function y(t){T(t);for(var e=t.firstChild;e;){var i=e.nextSibling,n=C(e);if(n){var r=z[n];r&&o(e,r)&&(e.parentNode.replaceChild(r,e),x(r,e))}y(e),e=i}}function x(e,n,r){var a,u=C(n);if(u&&delete z[u],!i.isSameNode||!i.isSameNode(t)){if(!r){if(_(e,n)===!1)return;if(s(e,n),$(e),w(e,n)===!1)return}if("TEXTAREA"!==e.nodeName){var d,l,h,N,A=n.firstChild,T=e.firstChild;t:for(;A;){for(h=A.nextSibling,d=C(A);T;){if(l=T.nextSibling,A.isSameNode&&A.isSameNode(T)){A=h,T=l;continue t}a=C(T);var E=T.nodeType,R=void 0;if(E===A.nodeType&&(E===m?(d?d!==a&&((N=z[d])?T.nextSibling===N?R=!1:(e.insertBefore(N,T),a?f(a):c(T,e,!0),l=T.nextSibling,T=N):R=!1):a&&(R=!1),R=R!==!1&&o(T,A),R&&x(T,A)):(E===v||E==g)&&(R=!0,T.nodeValue=A.nodeValue)),R){A=h,T=l;continue t}a?f(a):c(T,e,!0),T=l}if(d&&(N=z[d])&&o(N,A))e.appendChild(N),x(N,A);else{var U=S(A);U!==!1&&(U&&(A=U),A.actualize&&(A=A.actualize(e.ownerDocument||p)),e.appendChild(A),y(A))}A=h,T=l}for(;T;)l=T.nextSibling,(a=C(T))?f(a):c(T,e,!0),T=l}var B=b[e.nodeName];B&&B(e,n)}}if(d||(d={}),"string"==typeof i)if("#document"===t.nodeName||"HTML"===t.nodeName){var N=i;i=p.createElement("html"),i.innerHTML=N}else i=e(i);var A,C=d.getNodeKey||u,S=d.onBeforeNodeAdded||n,T=d.onNodeAdded||n,_=d.onBeforeElUpdated||n,$=d.onElUpdated||n,E=d.onBeforeNodeDiscarded||n,R=d.onNodeDiscarded||n,w=d.onBeforeElChildrenUpdated||n,U=d.childrenOnly===!0,z={};h(t);var B=t,I=B.nodeType,O=i.nodeType;if(!U)if(I===m)O===m?o(t,i)||(R(t),B=a(t,r(i.nodeName,i.namespaceURI))):B=i;else if(I===v||I===g){if(O===I)return B.nodeValue=i.nodeValue,B;B=i}if(B===i)R(t);else if(x(B,i,U),A)for(var V=0,D=A.length;D>V;V++){var H=z[A[V]];H&&c(H,H.parentNode,!1)}return!U&&B!==t&&t.parentNode&&(B.actualize&&(B=B.actualize(t.ownerDocument||p)),t.parentNode.replaceChild(B,t)),B}var f,l,p="undefined"!=typeof document&&document,c=p?p.body||p.createElement("div"):{},h="http://www.w3.org/1999/xhtml",m=1,v=3,g=8;l=c.hasAttributeNS?function(t,e,i){return t.hasAttributeNS(e,i)}:c.hasAttribute?function(t,e,i){return t.hasAttribute(i)}:function(t,e,i){return!!t.getAttributeNode(i)};var b={OPTION:function(t,e){i(t,e,"selected")},INPUT:function(t,e){i(t,e,"checked"),i(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),l(e,null,"value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var i=e.value;t.value!==i&&(t.value=i),t.firstChild&&(t.firstChild.nodeValue=i)}};t.exports=d},function(t){t.exports=function(t){t=t||{};var e={},i=0;return t.on=function(n,o){return"function"==typeof o&&("undefined"==typeof o.id&&(o._id=i++),n.replace(/\S+/g,function(t,i){(e[t]=e[t]||[]).push(o),o.typed=i>0})),t},t.off=function(i,n){return"*"==i?e={}:i.replace(/\S+/g,function(t){if(n)for(var i,o=e[t],r=0;i=o&&o[r];++r)i._id==n._id&&o.splice(r--,1);else e[t]=[]}),t},t.one=function(e,i){function n(){t.off(e,n),i.apply(t,arguments)}return t.on(e,n)},t.trigger=function(i){for(var n,o=[].slice.call(arguments,1),r=e[i]||[],s=0;n=r[s];++s)n.busy||(n.busy=1,n.apply(t,n.typed?[i].concat(o):o),r[s]!==n&&s--,n.busy=0);return e.all&&"all"!=i&&t.trigger.apply(t,["all",i].concat(o)),t},t}}])});