!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1),o=n(3),r={observable:o,mount:function(t,e){return this.component(t).mount(e)},render:function(t){var e=$("<div>");return this.mount(t,e),e.html()},unmount:function(t){t.unmount()},component:function(t){return new i(t)}};o(r),t.exports=r},function(t,e,n){function i(t){this.opts=t||{},this.data=t.data||{},this.refs={},this._mixin(),r(this),this._listenTo(),this.trigger("init"),this.trigger("update"),this._getDom(),this._initRefs(this)}var o=n(2),r=n(3),s=n(4);i.prototype.mount=function(t){return this.el=t?$(t):this.el,this.el.append(this.dom.children()),this._bindEvents(),this.trigger("updated"),this.trigger("mount"),this},i.prototype.update=function(t){if(this.data=t?$.extend(!1,this.data,t):this.data,this.trigger("update"),this._getDom(),this._initRefs(this),document.createRange){var e=this.el.clone();e.html(this.dom.html()),o(this.el[0],e[0],{onBeforeMorphEl:function(t,e){"TEXTAREA"===t.tagName||"INPUT"===t.tagName?(e.checked=t.checked,e.value=t.value):"OPTION"===t.tagName&&(e.selected=t.selected)}})}else this.el.empty().html(this.dom.html());this.trigger("updated")},i.prototype.unmount=function(){this.el.empty(),this.trigger("unmount"),this.off("*")},i.prototype.$=function(t){return this.el.find(t)},i.prototype._getDom=function(){return this.opts.tpl?void(this.dom=$("<div>"+this.opts.tpl(this.data)+"</div>")):void(this.dom=$("<div></div>"))},i.prototype._initRefs=function(t){if(this.opts.refs)for(var e in this.opts.refs){var n=this.opts.refs[e];n.data&&(n.component.data=$.extend(!1,n.component.data,n.data));var o=new i(n.component);o.refOpts=$.extend(!1,{},n),o.parent=t,this.refs[e]=o,o.el=t.dom.find(n.el),o.mount()}},i.prototype._bindEvents=function(){if(!s.isServer()&&this.opts.events)for(var t in this.opts.events){var e=this.opts.events[t],n=t.indexOf(" ");if(-1===n)throw"Event separated by a space.";var i=t.substr(n+1,t.length);this.el.on(t.substr(0,n),i,$.proxy(this.opts.handle[e],this))}},i.prototype._mixin=function(){if(this.opts.mixins){this.opts.mixins.unshift(!1);var t=$.extend.apply($,this.opts.mixins);for(var e in t)this[e]=t[e]}},i.prototype._listenTo=function(){if(this.opts.listen)for(var t in this.opts.listen){var e=this.opts.listen[t];this.on(t,e)}},t.exports=i},function(t){function e(t){s||(s=document.createRange(),s.selectNode(document.body));var e;return s.createContextualFragment?e=s.createContextualFragment(t):(e=document.createElement("body"),e.innerHTML=t),e.childNodes[0]}function n(){}function i(t,e){var n,i,o,r,s=e.attributes,a={};for(n=s.length-1;n>=0;n--)i=s[n],i.specified!==!1&&(o=i.name,r=i.value,a[o]=!0,t.getAttribute(o)!==r&&t.setAttribute(o,r));for(s=t.attributes,n=s.length-1;n>=0;n--)i=s[n],i.specified!==!1&&(o=i.name,a.hasOwnProperty(o)||t.removeAttribute(o))}function o(t,e){for(var n=t.firstChild;n;){var i=n.nextSibling;e.appendChild(n),n=i}return e}function r(t,r,s){function u(t,e){var n=t.id;if(n?l[n]=t:e||h(t),1===t.nodeType)for(var i=t.firstChild;i;)u(i,e||n),i=i.nextSibling}function d(t){if(1===t.nodeType)for(var e=t.firstChild;e;)e.id||(h(e),d(e)),e=e.nextSibling}function f(t,e,n){g(t)!==!1&&(e.removeChild(t),n?t.id||(h(t),d(t)):u(t))}function c(t,e,n,o){if(e.id&&delete l[e.id],!o){if(v(t,e)===!1)return;if(i(t,e),m(t,e)===!1)return}if("TEXTAREA"!=t.tagName){var r,s,u,d,h,g=e.firstChild,y=t.firstChild;t:for(;g;){for(u=g.nextSibling,r=g.id;y;){var x=y.id;if(s=y.nextSibling,!n&&x&&(h=p[x]))h.parentNode.replaceChild(y,h),c(y,h,n),y=s;else{var b=y.nodeType;if(b===g.nodeType){var N=!1;if(1===b?(y.tagName===g.tagName&&(x||r?r===x&&(N=!0):N=!0),N&&c(y,g,n)):3===b&&(N=!0,y.nodeValue=g.nodeValue),N){g=u,y=s;continue t}}f(y,t,n),y=s}}r&&((d=l[r])?(c(d,g,!0),g=d):p[r]=g),t.appendChild(g),g=u,y=s}for(;y;)s=y.nextSibling,f(y,t,n),y=s}var T=a[t.tagName];T&&T(t,e)}s||(s={}),"string"==typeof r&&(r=e(r));var l={},p={},h=s.onNodeDiscarded||n,v=s.onBeforeMorphEl||n,m=s.onBeforeMorphElChildren||n,g=s.onBeforeNodeDiscarded||n,y=s.childrenOnly===!0,x=t,b=x.nodeType,N=r.nodeType;if(!y)if(1===b)1===N?t.tagName!==r.tagName&&(h(t),x=o(t,document.createElement(r.tagName))):x=r;else if(3===b){if(3===N)return x.nodeValue=r.nodeValue,x;x=r}if(x===r)h(t);else{c(x,r,!1,y);for(var T in l)if(l.hasOwnProperty(T)){var A=l[T];h(A),d(A)}}return!y&&x!==t&&t.parentNode&&t.parentNode.replaceChild(x,t),x}var s,a={OPTION:function(t,e){(t.selected=e.selected)?t.setAttribute("selected",""):t.removeAttribute("selected","")},INPUT:function(t,e){t.checked=e.checked,t.value!=e.value&&(t.value=e.value),e.hasAttribute("checked")||t.removeAttribute("checked"),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var n=e.value;t.value!=n&&(t.value=n),t.firstChild&&(t.firstChild.nodeValue=n)}};t.exports=r},function(t,e,n){var i=n(4);t.exports=function(t){t=t||{};var e={},n=0;return t.on=function(o,r){return i.isFunction(r)&&(i.isUndefined(r.id)&&(r._id=n++),o.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(r),r.typed=n>0})),t},t.off=function(n,i){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(i)for(var n,o=e[t],r=0;n=o&&o[r];++r)n._id==i._id&&o.splice(r--,1);else e[t]=[]}),t},t.one=function(e,n){function i(){t.off(e,i),n.apply(t,arguments)}return t.on(e,i)},t.trigger=function(n){for(var i,o=[].slice.call(arguments,1),r=e[n]||[],s=0;i=r[s];++s)i.busy||(i.busy=1,i.apply(t,i.typed?[n].concat(o):o),r[s]!==i&&s--,i.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(o)),t},t}},function(t){t.exports={counter:0,uniqueId:function(t){return(t||"")+ ++this.counter},isUndefined:function(t){return"undefined"==typeof t},isFunction:function(t){return"function"==typeof t},isServer:function(){return"undefined"==typeof window}}}])});