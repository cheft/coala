!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1),r=n(3),o={observable:r,mount:function(t,e){return this.component(t).mount(e)},unmount:function(t){t.unmount()},component:function(t){return new i(t)}};r(o),t.exports=o},function(t,e,n){function i(t){this.opts=t,this.tpl=t.tpl||function(){},this.el=t.el?$(t.el):void 0,this.data=t.data||{},this.listen=t.listen||{},this.events=t.events||{},this.handle=t.handle||{},this.refs={},this.id=r.uniqueId("component"),o(this),this._mixin(t.mixins),this._listenTo(),this.trigger("init")}var r=n(2),o=n(3);i.prototype.mount=function(t){return this.el=t?$(t):this.el,this.update(),this.trigger("mount"),this},i.prototype.update=function(t){this.data=t||this.data,this.trigger("update");var e=this._html();if(e)if(this.rid){var n=this.el;this.el=$(e).attr("rid",this.rid),n.append(this.el),delete this.rid}else{if(this.el.attr("rid"))return void this.el.empty().html($(e).html());this.el.empty().html(e)}this._bindEvents(),this._mountRefs(this),this.trigger("updated")},i.prototype.unmount=function(){this.el.empty(),this.trigger("unmount")},i.prototype.$=function(t){return this.el.find(t)},i.prototype._html=function(){return this.tpl(this.data)},i.prototype._mountRefs=function(t){if(this.opts.refs)for(var e in this.opts.refs){var n=this.opts.refs[e],r=new i(n.component);r.refOpts=$.extend(!1,{},n),delete r.refOpts.component,delete r.refOpts.el,n.data&&(r.data=$.extend(!1,r.data,n.data),delete r.refOpts.data),n.rid&&(r.rid=n.rid,delete r.refOpts.rid),r.parent=t,this.refs[e]=r,r.mount(n.el)}},i.prototype._bindEvents=function(){for(var t in this.events){var e=this.events[t],n=t.indexOf(" ");if(-1===n)throw"Event separated by a space.";var i=t.substr(n+1,t.length);this.el.on(t.substr(0,n),i,$.proxy(this.handle[e],this))}},i.prototype._mixin=function(t){if(t){t.unshift(!1);var e=$.extend.apply($,t);for(var n in e)this[n]=e[n]}},i.prototype._listenTo=function(){for(var t in this.listen){var e=this.listen[t];this.on(t,e)}},t.exports=i},function(t){t.exports={counter:0,uniqueId:function(t){return(t||"")+ ++this.counter},isUndefined:function(t){return"undefined"==typeof t},isFunction:function(t){return"function"==typeof t}}},function(t,e,n){var i=n(2);t.exports=function(t){t=t||{};var e={},n=0;return t.on=function(r,o){return i.isFunction(o)&&(i.isUndefined(o.id)&&(o._id=n++),r.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(o),o.typed=n>0})),t},t.off=function(n,i){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(i)for(var n,r=e[t],o=0;n=r&&r[o];++o)n._id==i._id&&r.splice(o--,1);else e[t]=[]}),t},t.one=function(e,n){function i(){t.off(e,i),n.apply(t,arguments)}return t.on(e,i)},t.trigger=function(n){for(var i,r=[].slice.call(arguments,1),o=e[n]||[],s=0;i=o[s];++s)i.busy||(i.busy=1,i.apply(t,i.typed?[n].concat(r):r),o[s]!==i&&s--,i.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(r)),t},t}}])});